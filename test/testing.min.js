!function(){"use strict";gui.DocumentSpirit=gui.Spirit.extend({onready:function(){this._super.onready(),(this.waiting=gui.hosted)&&this.action.addGlobal(gui.$ACTION_XFRAME_VISIBILITY),this.action.dispatchGlobal(gui.ACTION_DOC_ONSPIRITUALIZED)},onaction:function(i){switch(this._super.onaction(i),this.action.$handleownaction=!1,i.type){case gui.$ACTION_XFRAME_VISIBILITY:this._waiting=!1,gui.hasModule("layout@wunderbyte.com")&&(i.data===!0?this.visibility.on():this.visibility.off()),i.consume()}},oncrawler:function(i){var t=this._super.oncrawler(i);if(t===gui.Crawler.CONTINUE)switch(i.type){case gui.CRAWLER_VISIBLE:case gui.CRAWLER_INVISIBLE:this._waiting&&(t=gui.Crawler.STOP)}return t},onvisible:function(){this.css.remove(gui.CLASS_INVISIBLE),this._super.onvisible()},oninvisible:function(){this.css.add(gui.CLASS_INVISIBLE),this._super.oninvisible()},_loaded:!1,_waiting:!1,_timeout:null})}(self);